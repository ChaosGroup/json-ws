ace.define("ace/snippets",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/anchor","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom","ace/editor"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=a("./lib/lang"),g=a("./range").Range,h=a("./anchor").Anchor,i=a("./keyboard/hash_handler").HashHandler,j=a("./tokenizer").Tokenizer,k=g.comparePoints,l=function(){this.snippetMap={},this.snippetNameMap={}};(function(){d.implement(this,e),this.getTokenizer=function(){function a(a,b,c){return a=a.substr(1),/^\d+$/.test(a)&&!c.inFormatString?[{tabstopId:parseInt(a,10)}]:[{text:a}]}function b(a){return"(?:[^\\\\"+a+"]|\\\\.)"}return l.$tokenizer=new j({start:[{regex:/:/,onMatch:function(a,b,c){return c.length&&c[0].expectIf?(c[0].expectIf=!1,c[0].elseBranch=c[0],[c[0]]):":"}},{regex:/\\./,onMatch:function(a,b,c){var d=a[1];return"}"==d&&c.length?a=d:-1!="`$\\".indexOf(d)?a=d:c.inFormatString&&("n"==d?a="\n":"t"==d?a="\n":-1!="ulULE".indexOf(d)&&(a={changeCase:d,local:d>"a"})),[a]}},{regex:/}/,onMatch:function(a,b,c){return[c.length?c.shift():a]}},{regex:/\$(?:\d+|\w+)/,onMatch:a},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(b,c,d){var e=a(b.substr(1),c,d);return d.unshift(e[0]),e},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+b("\\|")+"*\\|",onMatch:function(a,b,c){c[0].choices=a.slice(1,-1).split(",")},next:"start"},{regex:"/("+b("/")+"+)/(?:("+b("/")+"*)/)(\\w*):?",onMatch:function(a,b,c){var d=c[0];return d.fmtString=a,a=this.splitRegex.exec(a),d.guard=a[1],d.fmt=a[2],d.flag=a[3],""},next:"start"},{regex:"`"+b("`")+"*`",onMatch:function(a,b,c){return c[0].code=a.splice(1,-1),""},next:"start"},{regex:"\\?",onMatch:function(a,b,c){c[0]&&(c[0].expectIf=!0)},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+b("/")+"+)/",token:"regex"},{regex:"",onMatch:function(a,b,c){c.inFormatString=!0},next:"start"}]}),l.prototype.getTokenizer=function(){return l.$tokenizer},l.$tokenizer},this.tokenizeTmSnippet=function(a,b){return this.getTokenizer().getLineTokens(a,b).tokens.map(function(a){return a.value||a})},this.$getDefaultValue=function(a,b){if(/^[A-Z]\d+$/.test(b)){var c=b.substr(1);return(this.variables[b[0]+"__"]||{})[c]}if(/^\d+$/.test(b))return(this.variables.__||{})[b];if(b=b.replace(/^TM_/,""),a){var d=a.session;switch(b){case"CURRENT_WORD":var e=d.getWordRange();case"SELECTION":case"SELECTED_TEXT":return d.getTextRange(e);case"CURRENT_LINE":return d.getLine(a.getCursorPosition().row);case"PREV_LINE":return d.getLine(a.getCursorPosition().row-1);case"LINE_INDEX":return a.getCursorPosition().column;case"LINE_NUMBER":return a.getCursorPosition().row+1;case"SOFT_TABS":return d.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return d.getTabSize();case"FILENAME":case"FILEPATH":return"";case"FULLNAME":return"Ace"}}},this.variables={},this.getVariableValue=function(a,b){return this.variables.hasOwnProperty(b)?this.variables[b](a,b)||"":this.$getDefaultValue(a,b)||""},this.tmStrFormat=function(a,b,c){var d=b.flag||"",e=b.guard;e=new RegExp(e,d.replace(/[^gi]/,""));var f=this.tokenizeTmSnippet(b.fmt,"formatString"),g=this,h=a.replace(e,function(){g.variables.__=arguments;for(var a=g.resolveVariables(f,c),b="E",d=0;d<a.length;d++){var e=a[d];if("object"==typeof e)if(a[d]="",e.changeCase&&e.local){var h=a[d+1];h&&"string"==typeof h&&("u"==e.changeCase?a[d]=h[0].toUpperCase():a[d]=h[0].toLowerCase(),a[d+1]=h.substr(1))}else e.changeCase&&(b=e.changeCase);else"U"==b?a[d]=e.toUpperCase():"L"==b&&(a[d]=e.toLowerCase())}return a.join("")});return this.variables.__=null,h},this.resolveVariables=function(a,b){function g(b){var c=a.indexOf(b,d+1);-1!=c&&(d=c)}for(var c=[],d=0;d<a.length;d++){var e=a[d];if("string"==typeof e)c.push(e);else{if("object"!=typeof e)continue;if(e.skip)g(e);else{if(e.processed<d)continue;if(e.text){var f=this.getVariableValue(b,e.text);f&&e.fmtString&&(f=this.tmStrFormat(f,e)),e.processed=d,null==e.expectIf?f&&(c.push(f),g(e)):f?e.skip=e.elseBranch:g(e)}else null!=e.tabstopId?c.push(e):null!=e.changeCase&&c.push(e)}}}return c},this.insertSnippetForSelection=function(a,b){function j(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];if("object"==typeof d){if(i[d.tabstopId])continue;var e=a.lastIndexOf(d,c-1);d=b[e]||{tabstopId:d.tabstopId}}b[c]=d}return b}var c=a.getCursorPosition(),d=a.session.getLine(c.row),e=a.session.getTabString(),f=d.match(/^\s*/)[0];c.column<f.length&&(f=f.slice(0,c.column)),b=b.replace(/\r/g,"");var g=this.tokenizeTmSnippet(b);g=this.resolveVariables(g,a),g=g.map(function(a){return"\n"==a?a+f:"string"==typeof a?a.replace(/\t/g,e):a});var h=[];g.forEach(function(a,b){if("object"==typeof a){var c=a.tabstopId,d=h[c];if(d||(d=h[c]=[],d.index=c,d.value=""),-1===d.indexOf(a)){d.push(a);var e=g.indexOf(a,b+1);if(-1!==e){var f=g.slice(b+1,e),i=f.some(function(a){return"object"==typeof a});i&&!d.value?d.value=f:!f.length||d.value&&"string"==typeof d.value||(d.value=f.join(""))}}}}),h.forEach(function(a){a.length=0});for(var i={},k=0;k<g.length;k++){var l=g[k];if("object"==typeof l){var n=l.tabstopId,o=g.indexOf(l,k+1);if(i[n])i[n]===l&&(i[n]=null);else{var p=h[n],q="string"==typeof p.value?[p.value]:j(p.value);q.unshift(k+1,Math.max(0,o-k)),q.push(l),i[n]=l,g.splice.apply(g,q),-1===p.indexOf(l)&&p.push(l)}}}var r=0,s=0,t="";g.forEach(function(a){if("string"==typeof a){var b=a.split("\n");b.length>1?(s=b[b.length-1].length,r+=b.length-1):s+=a.length,t+=a}else a.start?a.end={row:r,column:s}:a.start={row:r,column:s}});var u=a.getSelectionRange(),v=a.session.replace(u,t),w=new m(a),x=a.inVirtualSelectionMode&&a.selection.index;w.addTabstops(h,u.start,v,x)},this.insertSnippet=function(a,b){var c=this;return a.inVirtualSelectionMode?c.insertSnippetForSelection(a,b):(a.forEachSelection(function(){c.insertSnippetForSelection(a,b)},null,{keepOrder:!0}),void(a.tabstopManager&&a.tabstopManager.tabNext()))},this.$getScope=function(a){var b=a.session.$mode.$id||"";if(b=b.split("/").pop(),"html"===b||"php"===b){"php"!==b||a.session.$mode.inlinePhp||(b="html");var c=a.getCursorPosition(),d=a.session.getState(c.row);"object"==typeof d&&(d=d[0]),d.substring&&("js-"==d.substring(0,3)?b="javascript":"css-"==d.substring(0,4)?b="css":"php-"==d.substring(0,4)&&(b="php"))}return b},this.getActiveScopes=function(a){var b=this.$getScope(a),c=[b],d=this.snippetMap;return d[b]&&d[b].includeScopes&&c.push.apply(c,d[b].includeScopes),c.push("_"),c},this.expandWithTab=function(a,b){var c=this,d=a.forEachSelection(function(){return c.expandSnippetForSelection(a,b)},null,{keepOrder:!0});return d&&a.tabstopManager&&a.tabstopManager.tabNext(),d},this.expandSnippetForSelection=function(a,b){var h,c=a.getCursorPosition(),d=a.session.getLine(c.row),e=d.substring(0,c.column),f=d.substr(c.column),g=this.snippetMap;return this.getActiveScopes(a).some(function(a){var b=g[a];return b&&(h=this.findMatchingSnippet(b,e,f)),!!h},this),h?b&&b.dryRun?!0:(a.session.doc.removeInLine(c.row,c.column-h.replaceBefore.length,c.column+h.replaceAfter.length),this.variables.M__=h.matchBefore,this.variables.T__=h.matchAfter,this.insertSnippetForSelection(a,h.content),this.variables.M__=this.variables.T__=null,!0):!1},this.findMatchingSnippet=function(a,b,c){for(var d=a.length;d--;){var e=a[d];if((!e.startRe||e.startRe.test(b))&&(!e.endRe||e.endRe.test(c))&&(e.startRe||e.endRe))return e.matchBefore=e.startRe?e.startRe.exec(b):[""],e.matchAfter=e.endRe?e.endRe.exec(c):[""],e.replaceBefore=e.triggerRe?e.triggerRe.exec(b)[0]:"",e.replaceAfter=e.endTriggerRe?e.endTriggerRe.exec(c)[0]:"",e}},this.snippetMap={},this.snippetNameMap={},this.register=function(a,b){function g(a){return a&&!/^\^?\(.*\)\$?$|^\\b$/.test(a)&&(a="(?:"+a+")"),a||""}function h(a,b,c){return a=g(a),b=g(b),c?(a=b+a,a&&"$"!=a[a.length-1]&&(a+="$")):(a+=b,a&&"^"!=a[0]&&(a="^"+a)),new RegExp(a)}function i(a){a.scope||(a.scope=b||"_"),b=a.scope,c[b]||(c[b]=[],d[b]={});var g=d[b];if(a.name){var i=g[a.name];i&&e.unregister(i),g[a.name]=a}c[b].push(a),a.tabTrigger&&!a.trigger&&(!a.guard&&/^\w/.test(a.tabTrigger)&&(a.guard="\\b"),a.trigger=f.escapeRegExp(a.tabTrigger)),(a.trigger||a.guard||a.endTrigger||a.endGuard)&&(a.startRe=h(a.trigger,a.guard,!0),a.triggerRe=new RegExp(a.trigger,"",!0),a.endRe=h(a.endTrigger,a.endGuard,!0),a.endTriggerRe=new RegExp(a.endTrigger,"",!0))}var c=this.snippetMap,d=this.snippetNameMap,e=this;a||(a=[]),a&&a.content?i(a):Array.isArray(a)&&a.forEach(i),this._signal("registerSnippets",{scope:b})},this.unregister=function(a,b){function e(a){var e=d[a.scope||b];if(e&&e[a.name]){delete e[a.name];var f=c[a.scope||b],g=f&&f.indexOf(a);g>=0&&f.splice(g,1)}}var c=this.snippetMap,d=this.snippetNameMap;a.content?e(a):Array.isArray(a)&&a.forEach(e)},this.parseSnippetFile=function(a){a=a.replace(/\r/g,"");for(var e,b=[],c={},d=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;e=d.exec(a);){if(e[1])try{c=JSON.parse(e[1]),b.push(c)}catch(f){}if(e[4])c.content=e[4].replace(/^\t/gm,""),b.push(c),c={};else{var g=e[2],h=e[3];if("regex"==g){var i=/\/((?:[^\/\\]|\\.)*)|$/g;c.guard=i.exec(h)[1],c.trigger=i.exec(h)[1],c.endTrigger=i.exec(h)[1],c.endGuard=i.exec(h)[1]}else"snippet"==g?(c.tabTrigger=h.match(/^\S*/)[0],c.name||(c.name=h)):c[g]=h}}return b},this.getSnippetByName=function(a,b){var d,c=this.snippetNameMap;return this.getActiveScopes(b).some(function(b){var e=c[b];return e&&(d=e[a]),!!d},this),d}}).call(l.prototype);var m=function(a){return a.tabstopManager?a.tabstopManager:(a.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=f.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),void this.attach(a))};(function(){this.attach=function(a){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=a,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(a){var c="r"==a.action[0],d=a.start,e=a.end,f=d.row,g=e.row,h=g-f,i=e.column-d.column;if(c&&(h=-h,i=-i),!this.$inChange&&c){var j=this.selectedTabstop,l=j&&!j.some(function(a){return k(a.start,d)<=0&&k(a.end,e)>=0});if(l)return this.detach()}for(var m=this.ranges,n=0;n<m.length;n++){var o=m[n];o.end.row<d.row||(c&&k(d,o.start)<0&&k(e,o.end)>0?(this.removeRange(o),n--):(o.start.row==f&&o.start.column>d.column&&(o.start.column+=i),o.end.row==f&&o.end.column>=d.column&&(o.end.column+=i),o.start.row>=f&&(o.start.row+=h),o.end.row>=f&&(o.end.row+=h),k(o.start,o.end)>0&&this.removeRange(o)))}m.length||this.detach()},this.updateLinkedFields=function(){var a=this.selectedTabstop;if(a&&a.hasLinkedRanges){this.$inChange=!0;for(var c=this.editor.session,d=c.getTextRange(a.firstNonLinked),e=a.length;e--;){var f=a[e];if(f.linked){var g=b.snippetManager.tmStrFormat(d,f.original);c.replace(f,g)}}this.$inChange=!1}},this.onAfterExec=function(a){a.command&&!a.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var a=this.editor.selection.lead,b=this.editor.selection.anchor,c=this.editor.selection.isEmpty(),d=this.ranges.length;d--;)if(!this.ranges[d].linked){var e=this.ranges[d].contains(a.row,a.column),f=c||this.ranges[d].contains(b.row,b.column);if(e&&f)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(a){var b=this.tabstops.length,c=this.index+(a||1);c=Math.min(Math.max(c,1),b),c==b&&(c=0),this.selectTabstop(c),0===c&&this.detach()},this.selectTabstop=function(a){this.$openTabstops=null;var b=this.tabstops[this.index];if(b&&this.addTabstopMarkers(b),this.index=a,b=this.tabstops[this.index],b&&b.length){if(this.selectedTabstop=b,this.editor.inVirtualSelectionMode)this.editor.selection.setRange(b.firstNonLinked);else{var c=this.editor.multiSelect;c.toSingleRange(b.firstNonLinked.clone());for(var d=b.length;d--;)b.hasLinkedRanges&&b[d].linked||c.addRange(b[d].clone(),!0);c.ranges[0]&&c.addRange(c.ranges[0].clone())}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)}},this.addTabstops=function(a,b,c){if(this.$openTabstops||(this.$openTabstops=[]),!a[0]){var d=g.fromPoints(c,c);p(d.start,b),p(d.end,b),a[0]=[d],a[0].index=0}var e=this.index,f=[e+1,0],h=this.ranges;a.forEach(function(a,c){for(var d=this.$openTabstops[c]||a,e=a.length;e--;){var i=a[e],j=g.fromPoints(i.start,i.end||i.start);o(j.start,b),o(j.end,b),j.original=i,j.tabstop=d,h.push(j),d!=a?d.unshift(j):d[e]=j,i.fmtString?(j.linked=!0,d.hasLinkedRanges=!0):d.firstNonLinked||(d.firstNonLinked=j)}d.firstNonLinked||(d.hasLinkedRanges=!1),d===a&&(f.push(d),this.$openTabstops[c]=d),this.addTabstopMarkers(d)},this),f.length>2&&(this.tabstops.length&&f.push(f.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,f))},this.addTabstopMarkers=function(a){var b=this.editor.session;a.forEach(function(a){a.markerId||(a.markerId=b.addMarker(a,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(a){var b=this.editor.session;a.forEach(function(a){b.removeMarker(a.markerId),a.markerId=null})},this.removeRange=function(a){var b=a.tabstop.indexOf(a);a.tabstop.splice(b,1),b=this.ranges.indexOf(a),this.ranges.splice(b,1),this.editor.session.removeMarker(a.markerId),a.tabstop.length||(b=this.tabstops.indexOf(a.tabstop),-1!=b&&this.tabstops.splice(b,1),this.tabstops.length||this.detach())},this.keyboardHandler=new i,this.keyboardHandler.bindKeys({Tab:function(a){b.snippetManager&&b.snippetManager.expandWithTab(a)||a.tabstopManager.tabNext(1)},"Shift-Tab":function(a){a.tabstopManager.tabNext(-1)},Esc:function(a){a.tabstopManager.detach()},Return:function(a){return!1}})}).call(m.prototype);var n={};n.onChange=h.prototype.onChange,n.setPosition=function(a,b){this.pos.row=a,this.pos.column=b},n.update=function(a,b,c){this.$insertRight=c,this.pos=a,this.onChange(b)};var o=function(a,b){0==a.row&&(a.column+=b.column),a.row+=b.row},p=function(a,b){a.row==b.row&&(a.column-=b.column),a.row-=b.row};a("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),b.snippetManager=new l;var q=a("./editor").Editor;(function(){this.insertSnippet=function(a,c){return b.snippetManager.insertSnippet(this,a,c)},this.expandSnippet=function(a){return b.snippetManager.expandWithTab(this,a)}}).call(q.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(a,b,c){"use strict";var d=a("../virtual_renderer").VirtualRenderer,e=a("../editor").Editor,f=a("../range").Range,g=a("../lib/event"),h=a("../lib/lang"),i=a("../lib/dom"),j=function(a){var b=new d(a);b.$maxLines=4;var c=new e(b);return c.setHighlightActiveLine(!1),c.setShowPrintMargin(!1),c.renderer.setShowGutter(!1),c.renderer.setHighlightGutterLine(!1),c.$mouseHandler.$focusWaitTimout=0,c.$highlightTagPending=!0,c},k=function(a){var b=i.createElement("div"),c=new j(b);a&&a.appendChild(b),b.style.display="none",c.renderer.content.style.cursor="default",c.renderer.setStyle("ace_autocomplete"),c.setOption("displayIndentGuides",!1),c.setOption("dragDelay",150);var d=function(){};c.focus=d,c.$isFocused=!0,c.renderer.$cursorLayer.restartTimer=d,c.renderer.$cursorLayer.element.style.opacity=0,c.renderer.$maxLines=8,c.renderer.$keepTextAreaAtCursor=!1,c.setHighlightActiveLine(!1),c.session.highlight(""),c.session.$searchHighlight.clazz="ace_highlight-marker",c.on("mousedown",function(a){var b=a.getDocumentPosition();c.selection.moveToPosition(b),l.start.row=l.end.row=b.row,a.stop()});var e,k=new f(-1,0,-1,1/0),l=new f(-1,0,-1,1/0);l.id=c.session.addMarker(l,"ace_active-line","fullLine"),c.setSelectOnHover=function(a){a?k.id&&(c.session.removeMarker(k.id),k.id=null):k.id=c.session.addMarker(k,"ace_line-hover","fullLine")},c.setSelectOnHover(!1),c.on("mousemove",function(a){if(!e)return void(e=a);if(e.x!=a.x||e.y!=a.y){e=a,e.scrollTop=c.renderer.scrollTop;var b=e.getDocumentPosition().row;k.start.row!=b&&(k.id||c.setRow(b),n(b))}}),c.renderer.on("beforeRender",function(){if(e&&-1!=k.start.row){e.$pos=null;var a=e.getDocumentPosition().row;k.id||c.setRow(a),n(a,!0)}}),c.renderer.on("afterRender",function(){var a=c.getRow(),b=c.renderer.$textLayer,d=b.element.childNodes[a-b.config.firstRow];d!=b.selectedNode&&(b.selectedNode&&i.removeCssClass(b.selectedNode,"ace_selected"),b.selectedNode=d,d&&i.addCssClass(d,"ace_selected"))});var m=function(){n(-1)},n=function(a,b){a!==k.start.row&&(k.start.row=k.end.row=a,b||c.session._emit("changeBackMarker"),c._emit("changeHoverMarker"))};c.getHoveredRow=function(){return k.start.row},g.addListener(c.container,"mouseout",m),c.on("hide",m),c.on("changeSelection",m),c.session.doc.getLength=function(){return c.data.length},c.session.doc.getLine=function(a){var b=c.data[a];return"string"==typeof b?b:b&&b.value||""};var o=c.session.bgTokenizer;return o.$tokenizeRow=function(a){var b=c.data[a],d=[];if(!b)return d;"string"==typeof b&&(b={value:b}),b.caption||(b.caption=b.value||b.name);for(var f,g,e=-1,h=0;h<b.caption.length;h++)g=b.caption[h],f=b.matchMask&1<<h?1:0,e!==f?(d.push({type:b.className||""+(f?"completion-highlight":""),value:g}),e=f):d[d.length-1].value+=g;if(b.meta){var i=c.renderer.$size.scrollerWidth/c.renderer.layerConfig.characterWidth,j=b.meta;j.length+b.caption.length>i-2&&(j=j.substr(0,i-b.caption.length-3)+"\u2026"),d.push({type:"rightAlignedText",value:j})}return d},o.$updateOnChange=d,o.start=d,c.session.$computeWidth=function(){return this.screenWidth=0},c.$blockScrolling=1/0,c.isOpen=!1,c.isTopdown=!1,c.data=[],c.setData=function(a){c.setValue(h.stringRepeat("\n",a.length),-1),c.data=a||[],c.setRow(0)},c.getData=function(a){return c.data[a]},c.getRow=function(){return l.start.row},c.setRow=function(a){a=Math.max(0,Math.min(this.data.length,a)),l.start.row!=a&&(c.selection.clearSelection(),l.start.row=l.end.row=a||0,c.session._emit("changeBackMarker"),c.moveCursorTo(a||0,0),c.isOpen&&c._signal("select"))},c.on("changeSelection",function(){c.isOpen&&c.setRow(c.selection.lead.row),c.renderer.scrollCursorIntoView()}),c.hide=function(){this.container.style.display="none",this._signal("hide"),c.isOpen=!1},c.show=function(a,b,d){var f=this.container,g=window.innerHeight,h=window.innerWidth,i=this.renderer,j=i.$maxLines*b*1.4,k=a.top+this.$borderSize,l=k>g/2&&!d;l&&k+b+j>g?(i.$maxPixelHeight=k-2*this.$borderSize,f.style.top="",f.style.bottom=g-k+"px",c.isTopdown=!1):(k+=b,i.$maxPixelHeight=g-k-.2*b,f.style.top=k+"px",f.style.bottom="",c.isTopdown=!0),f.style.display="",this.renderer.$textLayer.checkForSizeChanges();var m=a.left;m+f.offsetWidth>h&&(m=h-f.offsetWidth),f.style.left=m+"px",this._signal("show"),e=null,c.isOpen=!0},c.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},c.$imageSize=0,c.$borderSize=1,c};i.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_editor.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_editor.ace_autocomplete .ace_scroller {   background: none;   border: none;   box-shadow: none;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_editor.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}"),b.AcePopup=k}),ace.define("ace/autocomplete/util",["require","exports","module"],function(a,b,c){"use strict";b.parForEach=function(a,b,c){var d=0,e=a.length;0===e&&c();for(var f=0;e>f;f++)b(a[f],function(a,b){d++,d===e&&c(a,b)})};var d=/[a-zA-Z_0-9\$\-\u00A2-\uFFFF]/;b.retrievePrecedingIdentifier=function(a,b,c){c=c||d;for(var e=[],f=b-1;f>=0&&c.test(a[f]);f--)e.push(a[f]);return e.reverse().join("")},b.retrieveFollowingIdentifier=function(a,b,c){c=c||d;for(var e=[],f=b;f<a.length&&c.test(a[f]);f++)e.push(a[f]);return e},b.getCompletionPrefix=function(a){var d,b=a.getCursorPosition(),c=a.session.getLine(b.row);return a.completers.forEach(function(a){a.identifierRegexps&&a.identifierRegexps.forEach(function(a){!d&&a&&(d=this.retrievePrecedingIdentifier(c,b.column,a))}.bind(this))}.bind(this)),d||this.retrievePrecedingIdentifier(c,b.column)}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/snippets"],function(a,b,c){"use strict";var d=a("./keyboard/hash_handler").HashHandler,e=a("./autocomplete/popup").AcePopup,f=a("./autocomplete/util"),h=(a("./lib/event"),a("./lib/lang")),i=a("./lib/dom"),j=a("./snippets").snippetManager,k=function(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.gatherCompletionsId=0,this.keyboardHandler=new d,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=h.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=h.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.$init=function(){return this.popup=new e(document.body||document.documentElement),this.popup.on("click",function(a){this.insertMatch(),a.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(a,b,c){this.popup||this.$init(),this.popup.setData(this.completions.filtered),a.keyBinding.addKeyboardHandler(this.keyboardHandler);var d=a.renderer;if(this.popup.setRow(this.autoSelect?0:-1),c)c&&!b&&this.detach();else{this.popup.setTheme(a.getTheme()),this.popup.setFontSize(a.getFontSize());var e=d.layerConfig.lineHeight,f=d.$cursorLayer.getPixelPosition(this.base,!0);f.left-=this.popup.getTextLeftOffset();var g=a.container.getBoundingClientRect();f.top+=g.top-d.layerConfig.offset,f.left+=g.left-a.renderer.scrollLeft,f.left+=d.gutterWidth,this.popup.show(f,e)}},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.gatherCompletionsId+=1,this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(a){var b=this.editor.selection.lead;(b.row!=this.base.row||b.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(a){var b=document.activeElement,c=this.editor.textInput.getElement(),d=a.relatedTarget&&a.relatedTarget==this.tooltipNode,e=this.popup&&this.popup.container;b==c||b.parentNode==e||d||b==this.tooltipNode||a.relatedTarget==c||this.detach()},this.mousedownListener=function(a){this.detach()},this.mousewheelListener=function(a){this.detach()},this.goTo=function(a){var b=this.popup.getRow(),c=this.popup.session.getLength()-1;switch(a){case"up":b=0>=b?c:b-1;break;case"down":b=b>=c?-1:b+1;break;case"start":b=0;break;case"end":b=c}this.popup.setRow(b)},this.insertMatch=function(a,b){if(a||(a=this.popup.getData(this.popup.getRow())),!a)return!1;if(a.completer&&a.completer.insertMatch)a.completer.insertMatch(this.editor,a);else{if(this.completions.filterText)for(var e,c=this.editor.selection.getAllRanges(),d=0;e=c[d];d++)e.start.column-=this.completions.filterText.length,this.editor.session.remove(e);a.snippet?j.insertSnippet(this.editor,a.snippet):this.editor.execCommand("insertstring",a.value||a)}this.detach()},this.commands={Up:function(a){a.completer.goTo("up")},Down:function(a){a.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(a){a.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(a){a.completer.goTo("end")},Esc:function(a){a.completer.detach()},Return:function(a){return a.completer.insertMatch()},"Shift-Return":function(a){a.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(a){var b=a.completer.insertMatch();return b||a.tabstopManager?b:void a.completer.goTo("down")},PageUp:function(a){a.completer.popup.gotoPageUp()},PageDown:function(a){a.completer.popup.gotoPageDown()}},this.gatherCompletions=function(a,b){var c=a.getSession(),d=a.getCursorPosition(),g=(c.getLine(d.row),f.getCompletionPrefix(a));this.base=c.doc.createAnchor(d.row,d.column-g.length),this.base.$insertRight=!0;var h=[],i=a.completers.length;return a.completers.forEach(function(e,f){e.getCompletions(a,c,d,g,function(d,e){!d&&e&&(h=h.concat(e));var f=a.getCursorPosition();c.getLine(f.row);b(null,{prefix:g,matches:h,finished:0===--i})})}),!0},this.showPopup=function(a){this.editor&&this.detach(),this.activated=!0,this.editor=a,a.completer!=this&&(a.completer&&a.completer.detach(),a.completer=this),a.on("changeSelection",this.changeListener),a.on("blur",this.blurListener),a.on("mousedown",this.mousedownListener),a.on("mousewheel",this.mousewheelListener),this.updateCompletions()},this.updateCompletions=function(a){if(a&&this.base&&this.completions){var b=this.editor.getCursorPosition(),c=this.editor.session.getTextRange({start:this.base,end:b});if(c==this.completions.filterText)return;return this.completions.setFilter(c),this.completions.filtered.length&&(1!=this.completions.filtered.length||this.completions.filtered[0].value!=c||this.completions.filtered[0].snippet)?void this.openPopup(this.editor,c,a):this.detach()}var d=this.gatherCompletionsId;this.gatherCompletions(this.editor,function(b,c){var e=function(){return c.finished?this.detach():void 0}.bind(this),f=c.prefix,g=c&&c.matches;if(!g||!g.length)return e();if(0===f.indexOf(c.prefix)&&d==this.gatherCompletionsId){this.completions=new l(g),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(f);var h=this.completions.filtered;return h.length&&(1!=h.length||h[0].value!=f||h[0].snippet)?this.autoInsert&&1==h.length&&c.finished?this.insertMatch(h[0]):void this.openPopup(this.editor,f,a):e()}}.bind(this))},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var a=this.popup,b=a.data,c=b&&(b[a.getHoveredRow()]||b[a.getRow()]),d=null;return c&&this.editor&&this.popup.isOpen?(this.editor.completers.some(function(a){return a.getDocTooltip&&(d=a.getDocTooltip(c)),d}),d||(d=c),"string"==typeof d&&(d={docText:d}),d&&(d.docHTML||d.docText)?void this.showDocTooltip(d):this.hideDocTooltip()):this.hideDocTooltip()},this.showDocTooltip=function(a){this.tooltipNode||(this.tooltipNode=i.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this));var b=this.tooltipNode;a.docHTML?b.innerHTML=a.docHTML:a.docText&&(b.textContent=a.docText),b.parentNode||document.body.appendChild(b);var c=this.popup,d=c.container.getBoundingClientRect();b.style.top=c.container.style.top,b.style.bottom=c.container.style.bottom,window.innerWidth-d.right<320?(b.style.right=window.innerWidth-d.left+"px",b.style.left=""):(b.style.left=d.right+1+"px",b.style.right=""),b.style.display="block"},this.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),this.tooltipNode){var a=this.tooltipNode;this.editor.isFocused()||document.activeElement!=a||this.editor.focus(),this.tooltipNode=null,a.parentNode&&a.parentNode.removeChild(a)}}}).call(k.prototype),k.startCommand={name:"startAutocomplete",exec:function(a){a.completer||(a.completer=new k),a.completer.autoInsert=!1,a.completer.autoSelect=!0,a.completer.showPopup(a),a.completer.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var l=function(a,b){this.all=a,this.filtered=a,this.filterText=b||"",this.exactMatch=!1};(function(){this.setFilter=function(a){if(a.length>this.filterText&&0===a.lastIndexOf(this.filterText,0))var b=this.filtered;else var b=this.all;this.filterText=a,b=this.filterCompletions(b,this.filterText),b=b.sort(function(a,b){return b.exactMatch-a.exactMatch||b.score-a.score});var c=null;b=b.filter(function(a){var b=a.snippet||a.caption||a.value;return b===c?!1:(c=b,!0)}),this.filtered=b},this.filterCompletions=function(a,b){var c=[],d=b.toUpperCase(),e=b.toLowerCase();a:for(var g,f=0;g=a[f];f++){var h=g.value||g.caption||g.snippet;if(h){var l,m,i=-1,j=0,k=0;if(this.exactMatch){if(b!==h.substr(0,b.length))continue a}else for(var n=0;n<b.length;n++){var o=h.indexOf(e[n],i+1),p=h.indexOf(d[n],i+1);if(l=o>=0&&(0>p||p>o)?o:p,0>l)continue a;m=l-i-1,m>0&&(-1===i&&(k+=10),k+=m),j|=1<<l,i=l}g.matchMask=j,g.exactMatch=k?0:1,g.score=(g.score||0)-k,c.push(g)}}return c}}).call(l.prototype),b.Autocomplete=k,b.FilteredList=l}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(a,b,c){function f(a,b){var c=a.getTextRange(d.fromPoints({row:0,column:0},b));return c.split(e).length-1}function g(a,b){var c=f(a,b),d=a.getValue().split(e),g=Object.create(null),h=d[c];return d.forEach(function(a,b){if(a&&a!==h){var e=Math.abs(c-b),f=d.length-e;g[a]?g[a]=Math.max(f,g[a]):g[a]=f}}),g}var d=a("../range").Range,e=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;b.getCompletions=function(a,b,c,d,e){var f=g(b,c,d),h=Object.keys(f);e(null,h.map(function(a){return{caption:a,value:a,score:f[a],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(a,b,c){"use strict";var d=a("../snippets").snippetManager,e=a("../autocomplete").Autocomplete,f=a("../config"),g=a("../lib/lang"),h=a("../autocomplete/util"),i=a("../autocomplete/text_completer"),j={getCompletions:function(a,b,c,d,e){if(b.$mode.completer)return b.$mode.completer.getCompletions(a,b,c,d,e);var f=a.session.getState(c.row),g=b.$mode.getCompletions(f,b,c,d);e(null,g)}},k={getCompletions:function(a,b,c,e,f){var g=d.snippetMap,h=[];d.getActiveScopes(a).forEach(function(a){for(var b=g[a]||[],c=b.length;c--;){var d=b[c],e=d.name||d.tabTrigger;e&&h.push({caption:e,snippet:d.content,meta:d.tabTrigger&&!d.name?d.tabTrigger+"\u21e5 ":"snippet",type:"snippet"})}},this),f(null,h);
},getDocTooltip:function(a){"snippet"!=a.type||a.docHTML||(a.docHTML=["<b>",g.escapeHTML(a.caption),"</b>","<hr></hr>",g.escapeHTML(a.snippet)].join(""))}},l=[k,i,j];b.setCompleters=function(a){l.length=0,a&&l.push.apply(l,a)},b.addCompleter=function(a){l.push(a)},b.textCompleter=i,b.keyWordCompleter=j,b.snippetCompleter=k;var m={name:"expandSnippet",exec:function(a){return d.expandWithTab(a)},bindKey:"Tab"},n=function(a,b){o(b.session.$mode)},o=function(a){var b=a.$id;d.files||(d.files={}),p(b),a.modes&&a.modes.forEach(o)},p=function(a){if(a&&!d.files[a]){var b=a.replace("mode","snippets");d.files[a]={},f.loadModule(b,function(b){b&&(d.files[a]=b,!b.snippets&&b.snippetText&&(b.snippets=d.parseSnippetFile(b.snippetText)),d.register(b.snippets||[],b.scope),b.includeScopes&&(d.snippetMap[b.scope].includeScopes=b.includeScopes,b.includeScopes.forEach(function(a){p("ace/mode/"+a)})))})}},q=function(a){var b=a.editor,c=b.completer&&b.completer.activated;if("backspace"===a.command.name)c&&!h.getCompletionPrefix(b)&&b.completer.detach();else if("insertstring"===a.command.name){var d=h.getCompletionPrefix(b),f=b.getSelectionRange().start.row,g=b.session.getLine(f);(d&&!c||"."===g.slice(-1))&&(b.completer||(b.completer=new e),b.completer.autoInsert=!1,b.completer.showPopup(b))}},r=a("../editor").Editor;a("../config").defineOptions(r.prototype,"editor",{enableBasicAutocompletion:{set:function(a){a?(this.completers||(this.completers=Array.isArray(a)?a:l),this.commands.addCommand(e.startCommand)):this.commands.removeCommand(e.startCommand)},value:!1},enableLiveAutocompletion:{set:function(a){a?(this.completers||(this.completers=Array.isArray(a)?a:l),this.commands.on("afterExec",q)):this.commands.removeListener("afterExec",q)},value:!1},enableSnippets:{set:function(a){a?(this.commands.addCommand(m),this.on("changeMode",n),n(null,this)):(this.commands.removeCommand(m),this.off("changeMode",n))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(){})}();
